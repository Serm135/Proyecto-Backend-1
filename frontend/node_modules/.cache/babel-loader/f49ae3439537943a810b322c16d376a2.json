{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\S\\\\Documents\\\\Proyecto-Backend-1\\\\frontend\\\\src\\\\pages\\\\NewPost\\\\Page.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport \"./style.scss\";\nimport { useNavigate } from \"react-router\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getUrl } from \"../../services/apiSlice\";\nimport { getUser, setUser } from \"../../services/userSlice\";\nimport { createPost, doRegister } from \"../../services/api\";\nimport { genNameFromPlaceHolder } from \"../../utils/tools\";\nimport { SmartForm } from \"../../components/form\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Page = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const API_URL = useSelector(getUrl);\n  const currentUser = useSelector(getUser);\n  React.useEffect(() => {\n    if (!currentUser) {\n      navigate('/login');\n    }\n  }, []);\n\n  const onSubmit = async data => createPost({\n    url: API_URL,\n    params: { ...data,\n      owner_id: currentUser._id\n    }\n  });\n\n  const onSuccess = data => {\n    navigate(`/profile/${currentUser._id}`);\n  };\n\n  const formStructure = [{\n    type: 'text',\n    placeholder: 'Name'\n  }, {\n    type: 'text',\n    placeholder: 'Description'\n  }, {\n    type: 'text',\n    placeholder: 'Image URL'\n  }, {\n    type: 'number',\n    placeholder: 'Price'\n  }];\n  const formButtons = [{\n    type: \"rounded-primary\",\n    text: \"Post\",\n    isSubmit: true\n  }];\n  const formInitData = formStructure.reduce((acc, curr) => ({ ...acc,\n    [genNameFromPlaceHolder(curr)]: \"\"\n  }), {});\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page new-post\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'welcome-text xlarge-text text-700',\n      children: \"Post a product!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(SmartForm, {\n      formInitData: formInitData,\n      formStructure: formStructure,\n      formButtons: formButtons,\n      onSubmit: onSubmit,\n      onSuccess: onSuccess,\n      workingText: \"Posting...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 12\n  }, this);\n};\n\n_s(Page, \"7GPAWiYdF7I+dsHUl15AoWcttYQ=\", false, function () {\n  return [useNavigate, useDispatch, useSelector, useSelector];\n});\n\n_c = Page;\nexport default Page;\n\nvar _c;\n\n$RefreshReg$(_c, \"Page\");","map":{"version":3,"sources":["C:/Users/S/Documents/Proyecto-Backend-1/frontend/src/pages/NewPost/Page.js"],"names":["React","useNavigate","useDispatch","useSelector","getUrl","getUser","setUser","createPost","doRegister","genNameFromPlaceHolder","SmartForm","Page","navigate","dispatch","API_URL","currentUser","useEffect","onSubmit","data","url","params","owner_id","_id","onSuccess","formStructure","type","placeholder","formButtons","text","isSubmit","formInitData","reduce","acc","curr"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,cAAP;AACA,SAAQC,WAAR,QAA0B,cAA1B;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,aAAvC;AACA,SAAQC,MAAR,QAAqB,yBAArB;AACA,SAAQC,OAAR,EAAiBC,OAAjB,QAA+B,0BAA/B;AACA,SAAQC,UAAR,EAAoBC,UAApB,QAAqC,oBAArC;AACA,SAAQC,sBAAR,QAAqC,mBAArC;AACA,SAAQC,SAAR,QAAwB,uBAAxB;;;AAEA,MAAMC,IAAI,GAAG,MAAM;AAAA;;AACf,QAAMC,QAAQ,GAAGX,WAAW,EAA5B;AACA,QAAMY,QAAQ,GAAGX,WAAW,EAA5B;AACA,QAAMY,OAAO,GAAGX,WAAW,CAACC,MAAD,CAA3B;AACA,QAAMW,WAAW,GAAGZ,WAAW,CAACE,OAAD,CAA/B;AAEAL,EAAAA,KAAK,CAACgB,SAAN,CAAgB,MAAM;AAClB,QAAI,CAACD,WAAL,EAAkB;AACdH,MAAAA,QAAQ,CAAC,QAAD,CAAR;AACH;AACJ,GAJD,EAIG,EAJH;;AAMA,QAAMK,QAAQ,GAAG,MAAOC,IAAP,IAAgBX,UAAU,CAAC;AAACY,IAAAA,GAAG,EAAEL,OAAN;AAAeM,IAAAA,MAAM,EAAE,EAAC,GAAGF,IAAJ;AAAUG,MAAAA,QAAQ,EAAEN,WAAW,CAACO;AAAhC;AAAvB,GAAD,CAA3C;;AACA,QAAMC,SAAS,GAAIL,IAAD,IAAU;AACxBN,IAAAA,QAAQ,CAAE,YAAWG,WAAW,CAACO,GAAI,EAA7B,CAAR;AACH,GAFD;;AAIA,QAAME,aAAa,GAAG,CAClB;AACIC,IAAAA,IAAI,EAAE,MADV;AAEIC,IAAAA,WAAW,EAAE;AAFjB,GADkB,EAKlB;AACID,IAAAA,IAAI,EAAE,MADV;AAEIC,IAAAA,WAAW,EAAE;AAFjB,GALkB,EASlB;AACID,IAAAA,IAAI,EAAE,MADV;AAEIC,IAAAA,WAAW,EAAE;AAFjB,GATkB,EAalB;AACID,IAAAA,IAAI,EAAE,QADV;AAEIC,IAAAA,WAAW,EAAE;AAFjB,GAbkB,CAAtB;AAkBA,QAAMC,WAAW,GAAG,CAChB;AACIF,IAAAA,IAAI,EAAE,iBADV;AAEIG,IAAAA,IAAI,EAAE,MAFV;AAGIC,IAAAA,QAAQ,EAAE;AAHd,GADgB,CAApB;AAOA,QAAMC,YAAY,GAAGN,aAAa,CAACO,MAAd,CAAqB,CAACC,GAAD,EAAMC,IAAN,MAAgB,EAAC,GAAGD,GAAJ;AAAS,KAACvB,sBAAsB,CAACwB,IAAD,CAAvB,GAAgC;AAAzC,GAAhB,CAArB,EAAoF,EAApF,CAArB;AAEA,sBAAO;AAAK,IAAA,SAAS,EAAE,eAAhB;AAAA,4BACH;AAAK,MAAA,SAAS,EAAE,mCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADG,eAIH,QAAC,SAAD;AACI,MAAA,YAAY,EAAEH,YADlB;AAEI,MAAA,aAAa,EAAEN,aAFnB;AAGI,MAAA,WAAW,EAAEG,WAHjB;AAII,MAAA,QAAQ,EAAEV,QAJd;AAKI,MAAA,SAAS,EAAEM,SALf;AAMI,MAAA,WAAW,EAAE;AANjB;AAAA;AAAA;AAAA;AAAA,YAJG;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AAaH,CAzDD;;GAAMZ,I;UACeV,W,EACAC,W,EACDC,W,EACIA,W;;;KAJlBQ,I;AA2DN,eAAeA,IAAf","sourcesContent":["import React from \"react\";\r\nimport \"./style.scss\"\r\nimport {useNavigate} from \"react-router\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {getUrl} from \"../../services/apiSlice\";\r\nimport {getUser, setUser} from \"../../services/userSlice\";\r\nimport {createPost, doRegister} from \"../../services/api\";\r\nimport {genNameFromPlaceHolder} from \"../../utils/tools\";\r\nimport {SmartForm} from \"../../components/form\";\r\n\r\nconst Page = () => {\r\n    const navigate = useNavigate();\r\n    const dispatch = useDispatch()\r\n    const API_URL = useSelector(getUrl)\r\n    const currentUser = useSelector(getUser)\r\n\r\n    React.useEffect(() => {\r\n        if (!currentUser) {\r\n            navigate('/login')\r\n        }\r\n    }, [])\r\n\r\n    const onSubmit = async (data) => createPost({url: API_URL, params: {...data, owner_id: currentUser._id}})\r\n    const onSuccess = (data) => {\r\n        navigate(`/profile/${currentUser._id}`)\r\n    }\r\n\r\n    const formStructure = [\r\n        {\r\n            type: 'text',\r\n            placeholder: 'Name'\r\n        },\r\n        {\r\n            type: 'text',\r\n            placeholder: 'Description'\r\n        },\r\n        {\r\n            type: 'text',\r\n            placeholder: 'Image URL',\r\n        },\r\n        {\r\n            type: 'number',\r\n            placeholder: 'Price',\r\n        },\r\n    ]\r\n    const formButtons = [\r\n        {\r\n            type: \"rounded-primary\",\r\n            text: \"Post\",\r\n            isSubmit: true\r\n        },\r\n    ]\r\n    const formInitData = formStructure.reduce((acc, curr) => ({...acc, [genNameFromPlaceHolder(curr)]: \"\"}), {})\r\n\r\n    return <div className={\"page new-post\"}>\r\n        <div className={'welcome-text xlarge-text text-700'}>\r\n            Post a product!\r\n        </div>\r\n        <SmartForm\r\n            formInitData={formInitData}\r\n            formStructure={formStructure}\r\n            formButtons={formButtons}\r\n            onSubmit={onSubmit}\r\n            onSuccess={onSuccess}\r\n            workingText={\"Posting...\"}\r\n        />\r\n    </div>\r\n}\r\n\r\nexport default Page"]},"metadata":{},"sourceType":"module"}