{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\S\\\\Documents\\\\Proyecto-Backend-1\\\\frontend\\\\src\\\\pages\\\\NewPost\\\\Page.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport \"./style.scss\";\nimport { useNavigate } from \"react-router\";\nimport { useSelector } from \"react-redux\";\nimport { getUrl } from \"../../services/apiSlice\";\nimport { getUser } from \"../../services/userSlice\";\nimport { createPost } from \"../../services/api\";\nimport { genNameFromPlaceHolder } from \"../../utils/tools\";\nimport { SmartForm } from \"../../components/form\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Page = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const API_URL = useSelector(getUrl);\n  const currentUser = useSelector(getUser);\n  React.useEffect(() => {\n    if (!currentUser) {\n      navigate('/login');\n    }\n  }, []);\n\n  const onSubmit = async data => {\n    const response = await createPost({\n      url: API_URL,\n      params: { ...data,\n        owner_id: currentUser._id\n      }\n    });\n    console.log(response);\n  };\n\n  const onSuccess = data => {\n    navigate(`/profile/${currentUser._id}`);\n  };\n\n  const formStructure = [{\n    type: 'text',\n    placeholder: 'Name'\n  }, {\n    type: 'text',\n    placeholder: 'Description'\n  }, {\n    type: 'text',\n    placeholder: 'Image URL'\n  }, {\n    type: 'number',\n    placeholder: 'Price'\n  }];\n  const formButtons = [{\n    type: \"rounded-primary\",\n    text: \"Post\",\n    isSubmit: true\n  }];\n  const formInitData = formStructure.reduce((acc, curr) => ({ ...acc,\n    [genNameFromPlaceHolder(curr)]: \"\"\n  }), {});\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page new-post\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'welcome-text xlarge-text text-700',\n      children: \"Post a product!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(SmartForm, {\n      formInitData: formInitData,\n      formStructure: formStructure,\n      formButtons: formButtons,\n      onSubmit: onSubmit,\n      onSuccess: onSuccess,\n      workingText: \"Posting...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 12\n  }, this);\n};\n\n_s(Page, \"jtTj4TC5HoeSUB4EZAKlcnpQV/g=\", false, function () {\n  return [useNavigate, useSelector, useSelector];\n});\n\n_c = Page;\nexport default Page;\n\nvar _c;\n\n$RefreshReg$(_c, \"Page\");","map":{"version":3,"sources":["C:/Users/S/Documents/Proyecto-Backend-1/frontend/src/pages/NewPost/Page.js"],"names":["React","useNavigate","useSelector","getUrl","getUser","createPost","genNameFromPlaceHolder","SmartForm","Page","navigate","API_URL","currentUser","useEffect","onSubmit","data","response","url","params","owner_id","_id","console","log","onSuccess","formStructure","type","placeholder","formButtons","text","isSubmit","formInitData","reduce","acc","curr"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,cAAP;AACA,SAAQC,WAAR,QAA0B,cAA1B;AACA,SAAQC,WAAR,QAA0B,aAA1B;AACA,SAAQC,MAAR,QAAqB,yBAArB;AACA,SAAQC,OAAR,QAAsB,0BAAtB;AACA,SAAQC,UAAR,QAAyB,oBAAzB;AACA,SAAQC,sBAAR,QAAqC,mBAArC;AACA,SAAQC,SAAR,QAAwB,uBAAxB;;;AAEA,MAAMC,IAAI,GAAG,MAAM;AAAA;;AACf,QAAMC,QAAQ,GAAGR,WAAW,EAA5B;AACA,QAAMS,OAAO,GAAGR,WAAW,CAACC,MAAD,CAA3B;AACA,QAAMQ,WAAW,GAAGT,WAAW,CAACE,OAAD,CAA/B;AAEAJ,EAAAA,KAAK,CAACY,SAAN,CAAgB,MAAM;AAClB,QAAI,CAACD,WAAL,EAAkB;AACdF,MAAAA,QAAQ,CAAC,QAAD,CAAR;AACH;AACJ,GAJD,EAIG,EAJH;;AAMA,QAAMI,QAAQ,GAAG,MAAOC,IAAP,IAAgB;AAC7B,UAAMC,QAAQ,GAAG,MAAMV,UAAU,CAAC;AAACW,MAAAA,GAAG,EAAEN,OAAN;AAAeO,MAAAA,MAAM,EAAE,EAAC,GAAGH,IAAJ;AAAUI,QAAAA,QAAQ,EAAEP,WAAW,CAACQ;AAAhC;AAAvB,KAAD,CAAjC;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYN,QAAZ;AACH,GAHD;;AAIA,QAAMO,SAAS,GAAIR,IAAD,IAAU;AACxBL,IAAAA,QAAQ,CAAE,YAAWE,WAAW,CAACQ,GAAI,EAA7B,CAAR;AACH,GAFD;;AAIA,QAAMI,aAAa,GAAG,CAClB;AACIC,IAAAA,IAAI,EAAE,MADV;AAEIC,IAAAA,WAAW,EAAE;AAFjB,GADkB,EAKlB;AACID,IAAAA,IAAI,EAAE,MADV;AAEIC,IAAAA,WAAW,EAAE;AAFjB,GALkB,EASlB;AACID,IAAAA,IAAI,EAAE,MADV;AAEIC,IAAAA,WAAW,EAAE;AAFjB,GATkB,EAalB;AACID,IAAAA,IAAI,EAAE,QADV;AAEIC,IAAAA,WAAW,EAAE;AAFjB,GAbkB,CAAtB;AAkBA,QAAMC,WAAW,GAAG,CAChB;AACIF,IAAAA,IAAI,EAAE,iBADV;AAEIG,IAAAA,IAAI,EAAE,MAFV;AAGIC,IAAAA,QAAQ,EAAE;AAHd,GADgB,CAApB;AAOA,QAAMC,YAAY,GAAGN,aAAa,CAACO,MAAd,CAAqB,CAACC,GAAD,EAAMC,IAAN,MAAgB,EAAC,GAAGD,GAAJ;AAAS,KAACzB,sBAAsB,CAAC0B,IAAD,CAAvB,GAAgC;AAAzC,GAAhB,CAArB,EAAoF,EAApF,CAArB;AAEA,sBAAO;AAAK,IAAA,SAAS,EAAE,eAAhB;AAAA,4BACH;AAAK,MAAA,SAAS,EAAE,mCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADG,eAIH,QAAC,SAAD;AACI,MAAA,YAAY,EAAEH,YADlB;AAEI,MAAA,aAAa,EAAEN,aAFnB;AAGI,MAAA,WAAW,EAAEG,WAHjB;AAII,MAAA,QAAQ,EAAEb,QAJd;AAKI,MAAA,SAAS,EAAES,SALf;AAMI,MAAA,WAAW,EAAE;AANjB;AAAA;AAAA;AAAA;AAAA,YAJG;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AAaH,CA3DD;;GAAMd,I;UACeP,W,EACDC,W,EACIA,W;;;KAHlBM,I;AA6DN,eAAeA,IAAf","sourcesContent":["import React from \"react\";\nimport \"./style.scss\"\nimport {useNavigate} from \"react-router\";\nimport {useSelector} from \"react-redux\";\nimport {getUrl} from \"../../services/apiSlice\";\nimport {getUser} from \"../../services/userSlice\";\nimport {createPost} from \"../../services/api\";\nimport {genNameFromPlaceHolder} from \"../../utils/tools\";\nimport {SmartForm} from \"../../components/form\";\n\nconst Page = () => {\n    const navigate = useNavigate();\n    const API_URL = useSelector(getUrl)\n    const currentUser = useSelector(getUser)\n\n    React.useEffect(() => {\n        if (!currentUser) {\n            navigate('/login')\n        }\n    }, [])\n\n    const onSubmit = async (data) => {\n        const response = await createPost({url: API_URL, params: {...data, owner_id: currentUser._id}})\n        console.log(response)\n    }\n    const onSuccess = (data) => {\n        navigate(`/profile/${currentUser._id}`)\n    }\n\n    const formStructure = [\n        {\n            type: 'text',\n            placeholder: 'Name'\n        },\n        {\n            type: 'text',\n            placeholder: 'Description'\n        },\n        {\n            type: 'text',\n            placeholder: 'Image URL',\n        },\n        {\n            type: 'number',\n            placeholder: 'Price',\n        },\n    ]\n    const formButtons = [\n        {\n            type: \"rounded-primary\",\n            text: \"Post\",\n            isSubmit: true\n        },\n    ]\n    const formInitData = formStructure.reduce((acc, curr) => ({...acc, [genNameFromPlaceHolder(curr)]: \"\"}), {})\n\n    return <div className={\"page new-post\"}>\n        <div className={'welcome-text xlarge-text text-700'}>\n            Post a product!\n        </div>\n        <SmartForm\n            formInitData={formInitData}\n            formStructure={formStructure}\n            formButtons={formButtons}\n            onSubmit={onSubmit}\n            onSuccess={onSuccess}\n            workingText={\"Posting...\"}\n        />\n    </div>\n}\n\nexport default Page"]},"metadata":{},"sourceType":"module"}