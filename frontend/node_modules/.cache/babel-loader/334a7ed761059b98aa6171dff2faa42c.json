{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\S\\\\Documents\\\\Proyecto-Backend-1\\\\frontend\\\\src\\\\components\\\\new-review\\\\Component.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport \"./style.scss\";\nimport { postReview } from \"../../services/api\";\nimport { useSelector } from \"react-redux\";\nimport { getUrl } from \"../../services/apiSlice\";\nimport { getUser } from \"../../services/userSlice\";\nimport { SmartForm } from \"../form\";\nimport { genNameFromPlaceHolder } from \"../../utils/tools\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Component = _ref => {\n  _s();\n\n  let {\n    product_id,\n    refreshReviews\n  } = _ref;\n  const API_URL = useSelector(getUrl);\n  const currentUser = useSelector(getUser);\n\n  if (!currentUser) {\n    return false;\n  }\n\n  const onSubmit = async _ref2 => {\n    let {\n      rating,\n      description\n    } = _ref2;\n    return postReview({\n      url: API_URL,\n      params: {\n        user_id: currentUser._id,\n        product_id,\n        rating,\n        description\n      }\n    });\n  };\n\n  const onSuccess = () => {\n    refreshReviews();\n  };\n\n  const formStructure = [{\n    type: 'text',\n    placeholder: 'Description'\n  }, {\n    type: 'number',\n    placeholder: 'Rating'\n  }];\n  const formButtons = [{\n    type: \"rounded-primary\",\n    text: \"Post review\",\n    isSubmit: true\n  }];\n  const formInitData = formStructure.reduce((acc, curr) => ({ ...acc,\n    [genNameFromPlaceHolder(curr)]: \"\"\n  }), {});\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: 'new-review',\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Leave a review\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(SmartForm, {\n      formInitData: formInitData,\n      formStructure: formStructure,\n      formButtons: formButtons,\n      onSubmit: onSubmit,\n      onSuccess: onSuccess,\n      workingText: \"Posting review...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 12\n  }, this);\n};\n\n_s(Component, \"FjSCs0fpTh2i0fI4yVzr0fD+Lqc=\", false, function () {\n  return [useSelector, useSelector];\n});\n\n_c = Component;\nexport default Component;\n\nvar _c;\n\n$RefreshReg$(_c, \"Component\");","map":{"version":3,"sources":["C:/Users/S/Documents/Proyecto-Backend-1/frontend/src/components/new-review/Component.js"],"names":["React","postReview","useSelector","getUrl","getUser","SmartForm","genNameFromPlaceHolder","Component","product_id","refreshReviews","API_URL","currentUser","onSubmit","rating","description","url","params","user_id","_id","onSuccess","formStructure","type","placeholder","formButtons","text","isSubmit","formInitData","reduce","acc","curr"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,cAAP;AACA,SAAQC,UAAR,QAAyB,oBAAzB;AACA,SAAQC,WAAR,QAA0B,aAA1B;AACA,SAAQC,MAAR,QAAqB,yBAArB;AACA,SAAQC,OAAR,QAAsB,0BAAtB;AACA,SAAQC,SAAR,QAAwB,SAAxB;AACA,SAAQC,sBAAR,QAAqC,mBAArC;;;AAEA,MAAMC,SAAS,GAAG,QAAkC;AAAA;;AAAA,MAAjC;AAACC,IAAAA,UAAD;AAAaC,IAAAA;AAAb,GAAiC;AAChD,QAAMC,OAAO,GAAGR,WAAW,CAACC,MAAD,CAA3B;AACA,QAAMQ,WAAW,GAAGT,WAAW,CAACE,OAAD,CAA/B;;AAEA,MAAI,CAACO,WAAL,EAAkB;AACd,WAAO,KAAP;AACH;;AAED,QAAMC,QAAQ,GAAG;AAAA,QAAO;AAACC,MAAAA,MAAD;AAASC,MAAAA;AAAT,KAAP;AAAA,WAAiCb,UAAU,CAAC;AAACc,MAAAA,GAAG,EAAEL,OAAN;AAAeM,MAAAA,MAAM,EAAE;AAACC,QAAAA,OAAO,EAAEN,WAAW,CAACO,GAAtB;AAA2BV,QAAAA,UAA3B;AAAuCK,QAAAA,MAAvC;AAA+CC,QAAAA;AAA/C;AAAvB,KAAD,CAA3C;AAAA,GAAjB;;AACA,QAAMK,SAAS,GAAG,MAAM;AACpBV,IAAAA,cAAc;AACjB,GAFD;;AAIA,QAAMW,aAAa,GAAG,CAClB;AACIC,IAAAA,IAAI,EAAE,MADV;AAEIC,IAAAA,WAAW,EAAE;AAFjB,GADkB,EAKlB;AACID,IAAAA,IAAI,EAAE,QADV;AAEIC,IAAAA,WAAW,EAAE;AAFjB,GALkB,CAAtB;AAUA,QAAMC,WAAW,GAAG,CAChB;AACIF,IAAAA,IAAI,EAAE,iBADV;AAEIG,IAAAA,IAAI,EAAE,aAFV;AAGIC,IAAAA,QAAQ,EAAE;AAHd,GADgB,CAApB;AAOA,QAAMC,YAAY,GAAGN,aAAa,CAACO,MAAd,CAAqB,CAACC,GAAD,EAAMC,IAAN,MAAgB,EAAC,GAAGD,GAAJ;AAAS,KAACtB,sBAAsB,CAACuB,IAAD,CAAvB,GAAgC;AAAzC,GAAhB,CAArB,EAAoF,EAApF,CAArB;AAEA,sBAAO;AAAK,IAAA,SAAS,EAAE,YAAhB;AAAA,4BACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADG,eAIH,QAAC,SAAD;AACI,MAAA,YAAY,EAAEH,YADlB;AAEI,MAAA,aAAa,EAAEN,aAFnB;AAGI,MAAA,WAAW,EAAEG,WAHjB;AAII,MAAA,QAAQ,EAAEX,QAJd;AAKI,MAAA,SAAS,EAAEO,SALf;AAMI,MAAA,WAAW,EAAE;AANjB;AAAA;AAAA;AAAA;AAAA,YAJG;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AAaH,CA7CD;;GAAMZ,S;UACcL,W,EACIA,W;;;KAFlBK,S;AA+CN,eAAeA,SAAf","sourcesContent":["import React from 'react'\nimport \"./style.scss\"\nimport {postReview} from \"../../services/api\";\nimport {useSelector} from \"react-redux\";\nimport {getUrl} from \"../../services/apiSlice\";\nimport {getUser} from \"../../services/userSlice\";\nimport {SmartForm} from \"../form\";\nimport {genNameFromPlaceHolder} from \"../../utils/tools\";\n\nconst Component = ({product_id, refreshReviews}) => {\n    const API_URL = useSelector(getUrl)\n    const currentUser = useSelector(getUser)\n\n    if (!currentUser) {\n        return false\n    }\n\n    const onSubmit = async ({rating, description}) => postReview({url: API_URL, params: {user_id: currentUser._id, product_id, rating, description}})\n    const onSuccess = () => {\n        refreshReviews()\n    }\n\n    const formStructure = [\n        {\n            type: 'text',\n            placeholder: 'Description'\n        },\n        {\n            type: 'number',\n            placeholder: 'Rating'\n        }\n    ]\n    const formButtons = [\n        {\n            type: \"rounded-primary\",\n            text: \"Post review\",\n            isSubmit: true\n        },\n    ]\n    const formInitData = formStructure.reduce((acc, curr) => ({...acc, [genNameFromPlaceHolder(curr)]: \"\"}), {})\n\n    return <div className={'new-review'} >\n        <h2>\n            Leave a review\n        </h2>\n        <SmartForm\n            formInitData={formInitData}\n            formStructure={formStructure}\n            formButtons={formButtons}\n            onSubmit={onSubmit}\n            onSuccess={onSuccess}\n            workingText={\"Posting review...\"}\n        />\n    </div>\n}\n\nexport default Component\n"]},"metadata":{},"sourceType":"module"}