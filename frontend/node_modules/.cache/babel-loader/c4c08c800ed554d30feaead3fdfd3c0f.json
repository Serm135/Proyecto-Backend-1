{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\S\\\\Documents\\\\Proyecto-Backend-1\\\\frontend\\\\src\\\\pages\\\\Login\\\\Page.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport \"./style.scss\";\nimport { useNavigate } from \"react-router\";\nimport { SmartForm } from \"../../components/form\";\nimport { doLogin } from \"../../services/api\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getUser, setUser } from \"../../services/userSlice\";\nimport { genNameFromPlaceHolder } from \"../../utils/tools\";\nimport { getUrl } from \"../../services/apiSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Page = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const API_URL = useSelector(getUrl);\n  const currentUser = useSelector(getUser);\n  React.useEffect(() => {\n    if (currentUser) {\n      navigate('/');\n    }\n  }, [currentUser]);\n\n  const onSubmit = async data => doLogin({\n    url: API_URL,\n    params: data\n  });\n\n  const onSuccess = data => {\n    dispatch(dispatch => setUser(dispatch, data));\n    navigate('/');\n  };\n\n  const formStructure = [{\n    type: 'text',\n    placeholder: 'Username'\n  }, {\n    type: 'password',\n    placeholder: 'Password'\n  }];\n  const formButtons = [{\n    type: \"rounded-primary\",\n    text: \"Log me in\",\n    isSubmit: true\n  }, {\n    type: \"tertiary\",\n    text: \"I don't have an account\",\n    fn: () => navigate('/register')\n  }];\n  const formInitData = formStructure.reduce((acc, curr) => ({ ...acc,\n    [genNameFromPlaceHolder(curr)]: \"\"\n  }), {});\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page login\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'welcome-text xlarge-text text-700',\n      children: \"Welcome back!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(SmartForm, {\n      formInitData: formInitData,\n      formStructure: formStructure,\n      formButtons: formButtons,\n      onSubmit: onSubmit,\n      onSuccess: onSuccess,\n      workingText: \"Logging in...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 12\n  }, this);\n};\n\n_s(Page, \"7GPAWiYdF7I+dsHUl15AoWcttYQ=\", false, function () {\n  return [useNavigate, useDispatch, useSelector, useSelector];\n});\n\n_c = Page;\nexport default Page;\n\nvar _c;\n\n$RefreshReg$(_c, \"Page\");","map":{"version":3,"sources":["C:/Users/S/Documents/Proyecto-Backend-1/frontend/src/pages/Login/Page.js"],"names":["React","useNavigate","SmartForm","doLogin","useDispatch","useSelector","getUser","setUser","genNameFromPlaceHolder","getUrl","Page","navigate","dispatch","API_URL","currentUser","useEffect","onSubmit","data","url","params","onSuccess","formStructure","type","placeholder","formButtons","text","isSubmit","fn","formInitData","reduce","acc","curr"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,cAAP;AACA,SAAQC,WAAR,QAA0B,cAA1B;AACA,SAAQC,SAAR,QAAwB,uBAAxB;AACA,SAAQC,OAAR,QAAsB,oBAAtB;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,aAAvC;AACA,SAAQC,OAAR,EAAiBC,OAAjB,QAA+B,0BAA/B;AACA,SAAQC,sBAAR,QAAqC,mBAArC;AACA,SAAQC,MAAR,QAAqB,yBAArB;;;AAEA,MAAMC,IAAI,GAAG,MAAM;AAAA;;AACf,QAAMC,QAAQ,GAAGV,WAAW,EAA5B;AACA,QAAMW,QAAQ,GAAGR,WAAW,EAA5B;AACA,QAAMS,OAAO,GAAGR,WAAW,CAACI,MAAD,CAA3B;AACA,QAAMK,WAAW,GAAGT,WAAW,CAACC,OAAD,CAA/B;AAEAN,EAAAA,KAAK,CAACe,SAAN,CAAgB,MAAM;AAClB,QAAID,WAAJ,EAAiB;AACbH,MAAAA,QAAQ,CAAC,GAAD,CAAR;AACH;AACJ,GAJD,EAIG,CAACG,WAAD,CAJH;;AAMA,QAAME,QAAQ,GAAG,MAAOC,IAAP,IAAgBd,OAAO,CAAC;AAACe,IAAAA,GAAG,EAAEL,OAAN;AAAeM,IAAAA,MAAM,EAAEF;AAAvB,GAAD,CAAxC;;AACA,QAAMG,SAAS,GAAIH,IAAD,IAAU;AACxBL,IAAAA,QAAQ,CAACA,QAAQ,IAAIL,OAAO,CAACK,QAAD,EAAWK,IAAX,CAApB,CAAR;AACAN,IAAAA,QAAQ,CAAC,GAAD,CAAR;AACH,GAHD;;AAKA,QAAMU,aAAa,GAAG,CAClB;AACIC,IAAAA,IAAI,EAAE,MADV;AAEIC,IAAAA,WAAW,EAAE;AAFjB,GADkB,EAKlB;AACID,IAAAA,IAAI,EAAE,UADV;AAEIC,IAAAA,WAAW,EAAE;AAFjB,GALkB,CAAtB;AAUA,QAAMC,WAAW,GAAG,CAChB;AACIF,IAAAA,IAAI,EAAE,iBADV;AAEIG,IAAAA,IAAI,EAAE,WAFV;AAGIC,IAAAA,QAAQ,EAAE;AAHd,GADgB,EAMhB;AACIJ,IAAAA,IAAI,EAAE,UADV;AAEIG,IAAAA,IAAI,EAAE,yBAFV;AAGIE,IAAAA,EAAE,EAAE,MAAMhB,QAAQ,CAAC,WAAD;AAHtB,GANgB,CAApB;AAYA,QAAMiB,YAAY,GAAGP,aAAa,CAACQ,MAAd,CAAqB,CAACC,GAAD,EAAMC,IAAN,MAAgB,EAAC,GAAGD,GAAJ;AAAS,KAACtB,sBAAsB,CAACuB,IAAD,CAAvB,GAAgC;AAAzC,GAAhB,CAArB,EAAoF,EAApF,CAArB;AAEA,sBAAO;AAAK,IAAA,SAAS,EAAE,YAAhB;AAAA,4BACH;AAAK,MAAA,SAAS,EAAE,mCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADG,eAIH,QAAC,SAAD;AACI,MAAA,YAAY,EAAEH,YADlB;AAEI,MAAA,aAAa,EAAEP,aAFnB;AAGI,MAAA,WAAW,EAAEG,WAHjB;AAII,MAAA,QAAQ,EAAER,QAJd;AAKI,MAAA,SAAS,EAAEI,SALf;AAMI,MAAA,WAAW,EAAE;AANjB;AAAA;AAAA;AAAA;AAAA,YAJG;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AAaH,CAvDD;;GAAMV,I;UACeT,W,EACAG,W,EACDC,W,EACIA,W;;;KAJlBK,I;AAyDN,eAAeA,IAAf","sourcesContent":["import React from \"react\";\r\nimport \"./style.scss\"\r\nimport {useNavigate} from \"react-router\";\r\nimport {SmartForm} from \"../../components/form\";\r\nimport {doLogin} from \"../../services/api\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {getUser, setUser} from \"../../services/userSlice\";\r\nimport {genNameFromPlaceHolder} from \"../../utils/tools\";\r\nimport {getUrl} from \"../../services/apiSlice\";\r\n\r\nconst Page = () => {\r\n    const navigate = useNavigate();\r\n    const dispatch = useDispatch()\r\n    const API_URL = useSelector(getUrl)\r\n    const currentUser = useSelector(getUser)\r\n\r\n    React.useEffect(() => {\r\n        if (currentUser) {\r\n            navigate('/')\r\n        }\r\n    }, [currentUser])\r\n\r\n    const onSubmit = async (data) => doLogin({url: API_URL, params: data})\r\n    const onSuccess = (data) => {\r\n        dispatch(dispatch => setUser(dispatch, data))\r\n        navigate('/')\r\n    }\r\n\r\n    const formStructure = [\r\n        {\r\n            type: 'text',\r\n            placeholder: 'Username'\r\n        },\r\n        {\r\n            type: 'password',\r\n            placeholder: 'Password'\r\n        }\r\n    ]\r\n    const formButtons = [\r\n        {\r\n            type: \"rounded-primary\",\r\n            text: \"Log me in\",\r\n            isSubmit: true\r\n        },\r\n        {\r\n            type: \"tertiary\",\r\n            text: \"I don't have an account\",\r\n            fn: () => navigate('/register')\r\n        },\r\n    ]\r\n    const formInitData = formStructure.reduce((acc, curr) => ({...acc, [genNameFromPlaceHolder(curr)]: \"\"}), {})\r\n\r\n    return <div className={\"page login\"}>\r\n        <div className={'welcome-text xlarge-text text-700'}>\r\n            Welcome back!\r\n        </div>\r\n        <SmartForm\r\n            formInitData={formInitData}\r\n            formStructure={formStructure}\r\n            formButtons={formButtons}\r\n            onSubmit={onSubmit}\r\n            onSuccess={onSuccess}\r\n            workingText={\"Logging in...\"}\r\n        />\r\n    </div>\r\n}\r\n\r\nexport default Page"]},"metadata":{},"sourceType":"module"}