{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\S\\\\Documents\\\\Proyecto-Backend-1\\\\frontend\\\\src\\\\pages\\\\Profile\\\\Page.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport \"./style.scss\";\nimport { useNavigate, useParams } from \"react-router\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getUrl } from \"../../services/apiSlice\";\nimport { Spinner } from \"../../components/spinners\";\nimport { fetchReviews, fetchUser, fetchUserPosts } from \"../../services/api\";\nimport { ProductCard } from \"../../components/product\";\nimport { dataReceived, getUser } from \"../../services/userSlice\";\nimport { RegularPrimaryButton } from \"../../components/buttons\";\nimport { Review } from \"../../components/review\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Page = () => {\n  _s();\n\n  const params = useParams();\n  const dispatch = useDispatch();\n  const API_URL = useSelector(getUrl);\n  const [userPosts, setUserPosts] = React.useState(undefined);\n  const [userReviews, setUserReviews] = React.useState(undefined);\n  const [userData, setUserData] = React.useState(undefined);\n  const currentUser = useSelector(getUser);\n  const navigate = useNavigate();\n  React.useEffect(() => {\n    const fetch = async () => {\n      const user = await fetchUser({\n        url: API_URL,\n        params: {\n          user_id: params.id\n        }\n      });\n      setUserData(user);\n      const posts = await fetchUserPosts({\n        url: API_URL,\n        params: {\n          user_id: params.id\n        }\n      });\n      setUserPosts(posts);\n      const reviews = await fetchReviews({\n        url: API_URL,\n        params: {\n          user_id: params.id\n        }\n      });\n      setUserReviews(reviews);\n    };\n\n    fetch();\n  }, []);\n\n  if (!userData) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {\n      text: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 16\n    }, this);\n  }\n\n  const redirectHistory = () => navigate('/history');\n\n  const logOut = () => {\n    localStorage.removeItem('user_id');\n    dispatch(dataReceived(undefined));\n    navigate('/');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page profile\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: userData.display_name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'profile__username',\n      children: `@${userData.username}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'profile__bio',\n      children: userData.bio\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this), currentUser._id === params.id && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'profile__buttons',\n      children: [/*#__PURE__*/_jsxDEV(RegularPrimaryButton, {\n        onClick: redirectHistory,\n        children: \"Purchase History\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(RegularPrimaryButton, {\n        onClick: logOut,\n        children: \"Log Out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 46\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: `${userData.display_name}'s Products`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'profile__posts',\n      children: userPosts ? userPosts.length > 0 ? userPosts.map((item, key) => /*#__PURE__*/_jsxDEV(ProductCard, {\n        data: item\n      }, key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 54\n      }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'profile__no-posts',\n        children: \" No posts. \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(Spinner, {\n        text: \"Loading posts...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: `${userData.display_name}'s Reviews`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: userReviews ? userReviews.length > 0 ? userReviews.map((item, key) => /*#__PURE__*/_jsxDEV(Review, {\n        showAuthor: false,\n        showProduct: true,\n        data: item\n      }, key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 56\n      }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'profile__no-reviews',\n        children: \" No reviews. \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(Spinner, {\n        text: \"Loading reviews...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 12\n  }, this);\n};\n\n_s(Page, \"bdz83DSzFe5OWkYA6eSkWXZ/aEE=\", false, function () {\n  return [useParams, useDispatch, useSelector, useSelector, useNavigate];\n});\n\n_c = Page;\nexport default Page;\n\nvar _c;\n\n$RefreshReg$(_c, \"Page\");","map":{"version":3,"sources":["C:/Users/S/Documents/Proyecto-Backend-1/frontend/src/pages/Profile/Page.js"],"names":["React","useNavigate","useParams","useDispatch","useSelector","getUrl","Spinner","fetchReviews","fetchUser","fetchUserPosts","ProductCard","dataReceived","getUser","RegularPrimaryButton","Review","Page","params","dispatch","API_URL","userPosts","setUserPosts","useState","undefined","userReviews","setUserReviews","userData","setUserData","currentUser","navigate","useEffect","fetch","user","url","user_id","id","posts","reviews","redirectHistory","logOut","localStorage","removeItem","display_name","username","bio","_id","length","map","item","key"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./style.scss\"\r\nimport {useNavigate, useParams} from \"react-router\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {getUrl} from \"../../services/apiSlice\";\r\nimport {Spinner} from \"../../components/spinners\";\r\nimport {fetchReviews, fetchUser, fetchUserPosts} from \"../../services/api\";\r\nimport {ProductCard} from \"../../components/product\";\r\nimport {dataReceived, getUser} from \"../../services/userSlice\";\r\nimport {RegularPrimaryButton} from \"../../components/buttons\";\r\nimport {Review} from \"../../components/review\";\r\n\r\nconst Page = () => {\r\n    const params = useParams();\r\n    const dispatch = useDispatch();\r\n    const API_URL = useSelector(getUrl);\r\n    const [userPosts, setUserPosts] = React.useState(undefined);\r\n    const [userReviews, setUserReviews] = React.useState(undefined);\r\n    const [userData, setUserData] = React.useState(undefined);\r\n    const currentUser = useSelector(getUser);\r\n    const navigate = useNavigate();\r\n\r\n    React.useEffect(() => {\r\n        const fetch = async () => {\r\n            const user = await fetchUser({url: API_URL, params: {user_id: params.id}})\r\n            setUserData(user)\r\n\r\n            const posts = await fetchUserPosts({url: API_URL, params: {user_id: params.id}})\r\n            setUserPosts(posts)\r\n\r\n            const reviews = await fetchReviews({url: API_URL, params: {user_id: params.id}})\r\n            setUserReviews(reviews)\r\n        }\r\n        fetch()\r\n    }, [])\r\n\r\n    if (!userData) {\r\n        return <Spinner\r\n            text={\"Loading...\"}\r\n        />\r\n    }\r\n\r\n    const redirectHistory = () => navigate('/history')\r\n    const logOut = () => {\r\n        localStorage.removeItem('user_id');\r\n        dispatch(dataReceived(undefined))\r\n        navigate('/')\r\n    }\r\n\r\n    return <div className={\"page profile\"}>\r\n        <h1>\r\n            {userData.display_name}\r\n        </h1>\r\n        <div className={'profile__username'}>\r\n            {`@${userData.username}`}\r\n        </div>\r\n        <div className={'profile__bio'}>\r\n            {userData.bio}\r\n        </div>\r\n        {\r\n            currentUser._id === params.id && <div className={'profile__buttons'}>\r\n                <RegularPrimaryButton onClick={redirectHistory}>\r\n                    Purchase History\r\n                </RegularPrimaryButton>\r\n                <RegularPrimaryButton onClick={logOut}>\r\n                    Log Out\r\n                </RegularPrimaryButton>\r\n            </div>\r\n        }\r\n        <h2>\r\n            {`${userData.display_name}'s Products`}\r\n        </h2>\r\n        <div className={'profile__posts'}>\r\n            {\r\n                userPosts ?\r\n                    userPosts.length > 0 ?\r\n                        userPosts.map((item, key) => <ProductCard\r\n                            key={key}\r\n                            data={item}\r\n                        />)\r\n                        :\r\n                        <div className={'profile__no-posts'}> No posts. </div>\r\n                    :\r\n                    <Spinner\r\n                        text={\"Loading posts...\"}\r\n                    />\r\n            }\r\n        </div>\r\n        <h2>\r\n            {`${userData.display_name}'s Reviews`}\r\n        </h2>\r\n        <div>\r\n            {\r\n                userReviews ?\r\n                    userReviews.length > 0 ?\r\n                        userReviews.map((item, key) => <Review\r\n                            showAuthor={false}\r\n                            showProduct={true}\r\n                            key={key}\r\n                            data={item}\r\n                        />)\r\n                        :\r\n                        <div className={'profile__no-reviews'}> No reviews. </div>\r\n                    :\r\n                    <Spinner\r\n                        text={\"Loading reviews...\"}\r\n                    />\r\n            }\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Page"]},"metadata":{},"sourceType":"module"}